.text-field {
  --padding-legend: 0.25rem;

  .input-box {
    position: relative;

    display: inline-flex;
    align-items: center;

    inline-size: 100%;

    border-radius: var(--shape-border-radius-2);

    label {
      position: absolute;
      inset-block-start: 0;
      inset-inline-start: 0;
      overflow: hidden;
      z-index: 1;

      transform: translate(var(--padding-inline), var(--padding-block)) scale(1);
      transform-origin: 0;

      font-weight: 400;

      transition: 0.2s ease-in-out;
      transition-property: transform, background-color;

      pointer-events: none;
    }

    fieldset {
      display: flex;
      align-items: center;

      border: 1px solid var(--palette-shared-input-outlined);
      border-radius: inherit;

      transition: border-color 0.1s cubic-bezier(0.4, 0, 0.2, 1);

      legend {
        position: absolute;
        overflow: hidden;

        display: block;

        inline-size: auto;
        max-inline-size: 0.01px;
        height: 0;

        margin-inline-start: calc(
          var(--padding-inline) - var(--padding-legend)
        );
        padding: 0;

        font-size: 0.75em;

        white-space: nowrap;

        transition: max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms;

        float: unset;

        > span {
          opacity: 0;
          visibility: visible;

          display: inline-block;

          padding-inline: var(--padding-legend);
        }
      }

      input {
        flex: 1;

        background-color: transparent;

        display: block;

        padding: var(--padding-block) var(--padding-inline);

        border: none;

        outline: none;

        font-size: 1rem;

        appearance: none;
      }
    }

    &:hover:not(:focus-within):has(input:not(:disabled)) {
      fieldset {
        border-color: 0 0 0 1px var(--palette-text-primary);
      }
    }

    &:focus-within {
      fieldset {
        box-shadow: 0 0 0 2px var(--palette-text-primary);

        border-color: transparent;
      }
    }

    &:has(.adornment.start) {
      fieldset {
        padding-inline-start: var(--padding-inline);

        input {
          padding-block: var(--padding-block);
          padding-inline-start: 0;
        }
      }
    }

    &:has(.adornment.end) {
      fieldset {
        padding-inline-end: var(--padding-inline);

        input {
          padding-block: var(--padding-block);
          padding-inline-end: 0 !important;
        }
      }
    }
  }

  .helper-text {
    color: var(--palette-text-secondary);

    margin: 0.5rem 1rem 0;

    font-size: 0.75rem;
  }

  &.normal {
    --padding-block: 1rem;
    --padding-inline: 1rem;
  }

  &.small {
    --padding-block: 0.5rem;
    --padding-inline: 1rem;
  }

  &:has(input:focus),
  &:has(.adornment),
  &:has(input:not(:placeholder-shown)),
  &:has(.has-placeholder) {
    .input-box {
      label {
        background-color: var(--palette-common-white);
        color: var(--palette-text-primary);

        transform: translate(var(--padding-inline), -50%) scale(0.75);

        font-weight: 600;
      }

      fieldset {
        legend {
          max-inline-size: 100%;
        }
      }
    }
  }

  &.error {
    .input-box {
      label {
        color: var(--palette-error-main);
      }

      fieldset {
        color: var(--palette-error-main);
        box-shadow: 0 0 0 1px var(--palette-error-main);
      }
    }
  }

  &:has(input[disabled]) {
    .input-box {
      label {
        color: var(--palette-action-disabled);
      }

      fieldset {
        input {
          color: var(--palette-action-disabled);
        }
      }
    }
  }
}
